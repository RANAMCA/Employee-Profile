spring:
  # Test Profile Configuration
  # Uses environment variables in CI, falls back to Testcontainers for local development
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:tc:postgresql:15:///testdb}
    username: ${SPRING_DATASOURCE_USERNAME:test}
    password: ${SPRING_DATASOURCE_PASSWORD:test}
    driver-class-name: ${SPRING_DATASOURCE_DRIVER:org.postgresql.Driver}

  data:
    mongodb:
      uri: ${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/test}

  redis:
    host: ${SPRING_DATA_REDIS_HOST:localhost}
    port: ${SPRING_DATA_REDIS_PORT:6379}

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true

  flyway:
    enabled: true
    clean-on-validation-error: true

# Disable AI service in tests
app:
  ai:
    huggingface:
      api-key: test-key
    cache:
      enabled: false

logging:
  level:
    root: WARN
    com.newwork.employeeprofile: DEBUG
